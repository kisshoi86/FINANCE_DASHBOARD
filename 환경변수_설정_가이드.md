# Snowflake 환경 변수 설정 가이드

## 🚨 연결 오류 해결 방법

대시보드에서 "Snowflake 연결 실패" 오류가 발생하는 경우, 환경 변수가 제대로 설정되지 않았을 수 있습니다.

## 📋 설정 방법

### 방법 1: PowerShell에서 직접 설정 (임시)

PowerShell을 열고 다음 명령어를 실행하세요:

```powershell
$env:SNOWFLAKE_ACCOUNT="cixxjbf-wp67697"
$env:SNOWFLAKE_USER="songahreum"
$env:SNOWFLAKE_PASSWORD="Fnfsnowflake2025!"
$env:SNOWFLAKE_WAREHOUSE="DEV_WH"
$env:SNOWFLAKE_DATABASE="FNF"
$env:SNOWFLAKE_SCHEMA="SAP_FNF"
$env:SNOWFLAKE_ROLE="PU_SQL_SAP"
```

**중요:** 이 방법은 현재 PowerShell 세션에만 유효합니다. 대시보드를 실행하려면 **같은 PowerShell 창**에서 `streamlit run dashboard.py`를 실행해야 합니다.

### 방법 2: 스크립트 사용

프로젝트 폴더에서:

```powershell
.\setup_env.ps1
```

### 방법 3: 시스템 환경 변수로 영구 설정

1. Windows 검색에서 "환경 변수" 검색
2. "시스템 환경 변수 편집" 선택
3. "환경 변수" 버튼 클릭
4. "사용자 변수" 또는 "시스템 변수"에서 "새로 만들기" 클릭
5. 다음 변수들을 추가:
   - `SNOWFLAKE_ACCOUNT` = `cixxjbf-wp67697`
   - `SNOWFLAKE_USER` = `songahreum`
   - `SNOWFLAKE_PASSWORD` = `Fnfsnowflake2025!`
   - `SNOWFLAKE_WAREHOUSE` = `DEV_WH`
   - `SNOWFLAKE_DATABASE` = `FNF`
   - `SNOWFLAKE_SCHEMA` = `SAP_FNF`
   - `SNOWFLAKE_ROLE` = `PU_SQL_SAP`
6. 모든 창을 닫고 다시 열기

## ✅ 설정 확인

대시보드의 사이드바에서:
1. "환경 변수 확인" 섹션을 열어보세요
2. 모든 변수가 설정되어 있는지 확인하세요
3. "Snowflake 연결 테스트" 버튼을 클릭하여 연결을 테스트하세요

## 🔧 문제 해결

### 오류: "'NoneType' object has no attribute 'find'"
- **원인**: SNOWFLAKE_ACCOUNT가 None이거나 잘못된 형식
- **해결**: 환경 변수가 올바르게 설정되었는지 확인

### 오류: "환경 변수가 설정되지 않았습니다"
- **원인**: 필수 환경 변수(ACCOUNT, USER, PASSWORD)가 없음
- **해결**: 위의 설정 방법을 따라 환경 변수를 설정하세요

### 연결은 되지만 데이터가 안 나옴
- **원인**: 쿼리가 실제 테이블 구조와 맞지 않음
- **해결**: `dashboard.py`의 쿼리를 실제 Snowflake 테이블 구조에 맞게 수정하세요

## 📝 참고

- 환경 변수는 대소문자를 구분합니다
- SNOWFLAKE_ACCOUNT에는 `.snowflakecomputing.com`을 포함하지 마세요
- 비밀번호에 특수문자가 있으면 따옴표로 감싸세요







